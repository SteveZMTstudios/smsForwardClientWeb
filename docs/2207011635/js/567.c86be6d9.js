"use strict";(self["webpackChunksmsFW"]=self["webpackChunksmsFW"]||[]).push([[567],{65567:function(e,t,o){o.r(t),o.d(t,{default:function(){return g}});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("a-space",{attrs:{direction:"vertical"}},[o("a-row",[o("a-space",[o("a-col",[e._v(" 版本码：")]),o("a-col",[o("a-input-number",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入版本码"},model:{value:e.version_code,callback:function(t){e.version_code=t},expression:"version_code"}})],1)],1)],1),o("a-row",[o("a-space",[o("a-col",[o("a-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:e.enableCloneConfig},expression:"{auth:enableCloneConfig}"}],style:e.buttonStyle,attrs:{type:"primary"},on:{click:e.pull}},[e._v(" 获取配置 ")])],1),o("a-col",[o("a-popconfirm",{attrs:{"cancel-text":"取消","ok-text":"确认"},on:{confirm:e.push},scopedSlots:e._u([{key:"title",fn:function(){return[o("p",{staticStyle:{color:"red"}},[e._v("用页面显示的配置覆盖服务端的配置？")])]},proxy:!0}])},[o("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),o("a-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:e.enableCloneConfig},expression:"{auth:enableCloneConfig}"}],style:e.buttonStyle,attrs:{type:"primary"}},[e._v(" 推送配置 ")])],1)],1)],1)],1),o("a-row",[o("a-space",[o("a-col",[o("a-popconfirm",{attrs:{"cancel-text":"取消","ok-text":"确认"},on:{confirm:e.downloadFile},scopedSlots:e._u([{key:"title",fn:function(){return[o("p",{staticStyle:{color:"red"}},[e._v("保存此页面显示的配置到本地？")])]},proxy:!0}])},[o("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),o("a-button",{style:e.buttonStyle,attrs:{type:"primary"}},[e._v("保存本地")])],1)],1),o("a-col",[o("a-button",{style:e.buttonStyle,attrs:{disabled:!(e.fileList&&e.fileList.length>0)||void 0,type:"primary"},on:{click:e.readFile}},[e._v(" 预览文件 ")])],1)],1)],1),o("a-row",[o("a-space",[o("a-col",[o("a-upload",{style:e.buttonStyle,attrs:{"before-upload":e.beforeUpload,"file-list":e.fileList,remove:e.handleRemove,accept:".json"}},[o("a-button",[o("a-icon",{attrs:{type:"upload"}}),e._v(" 选择文件 ")],1)],1)],1)],1)],1)],1),o("a-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0"}},[e._v(" 分割线 ")]),o("json-pre",{attrs:{json:e.json}})],1)},n=[],a=o(79767),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.json,expression:"json"}],staticClass:"content"},[o("pre",{domProps:{innerHTML:e._s(e.formattedJSON)}})])},l=[];function r(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}var c={mounted(){this.formattedJSON=r(this.json)},props:["json"],data(){return{formattedJSON:""}},watch:{json:function(e,t){this.formattedJSON=r(e)}}},u=c,d=o(1001),p=(0,d.Z)(u,i,l,!1,null,"31a4878b",null),f=p.exports;function h(e,t){e="string"===typeof e?e:JSON.stringify(e);let o=new Blob([e]);if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(o,t);else{const e=document.createElement("a");e.download=t,e.style.display="none",e.href=URL.createObjectURL(o),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}}var m=o(28935),v={components:{JsonPre:f},data(){return{fileList:[],json:"",version_code:300042,buttonStyle:{width:"110px"}}},created:function(){this.pull()},methods:{handleRemove(e){const t=this.fileList.indexOf(e),o=this.fileList.slice();o.splice(t,1),this.fileList=o},beforeUpload(e){return this.fileList=[e,...this.fileList],!1},readFile(){if(!this.fileList||this.fileList.length<1)this.$message.error("请选择文件");else{var e=new FileReader;e.onload=()=>this.json=e.result,e.readAsText(this.fileList[0])}},downloadFile(){console.log(this.json),h(this.json,"config.json")},pull(){let e=(new Date).getTime();this.$axios({method:"post",url:a.KB()+"/clone/pull",data:{data:{version_code:this.version_code},timestamp:e,sign:a.Xx(e,a.zY())}}).then((e=>{this.json=e.data.data})).catch((e=>{this.json=""}))},push(){let e=(new Date).getTime();this.$axios({method:"post",url:a.KB()+"/clone/push",data:{data:this.json,timestamp:e,sign:a.Xx(e,a.zY())}}).then((e=>{m.Z.prototype.$message.success("推送成功!")}))},enableCloneConfig(){return a.d2()}},watch:{}},y=v,b=(0,d.Z)(y,s,n,!1,null,null,null),g=b.exports}}]);
//# sourceMappingURL=567.c86be6d9.js.map