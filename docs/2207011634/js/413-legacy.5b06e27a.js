"use strict";(self["webpackChunksmsFW"]=self["webpackChunksmsFW"]||[]).push([[413],{70413:function(t,e,n){n.r(e),n.d(e,{default:function(){return C}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("a-space",{attrs:{direction:"vertical"}},[n("a-row",[n("a-space",[n("a-col",[t._v(" 版本码：")]),n("a-col",[n("a-input-number",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入版本码"},model:{value:t.version_code,callback:function(e){t.version_code=e},expression:"version_code"}})],1)],1)],1),n("a-row",[n("a-space",[n("a-col",[n("a-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:t.enableCloneConfig},expression:"{auth:enableCloneConfig}"}],style:t.buttonStyle,attrs:{type:"primary"},on:{click:t.pull}},[t._v(" 获取配置 ")])],1),n("a-col",[n("a-popconfirm",{attrs:{"cancel-text":"取消","ok-text":"确认"},on:{confirm:t.push},scopedSlots:t._u([{key:"title",fn:function(){return[n("p",{staticStyle:{color:"red"}},[t._v("用页面显示的配置覆盖服务端的配置？")])]},proxy:!0}])},[n("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),n("a-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:t.enableCloneConfig},expression:"{auth:enableCloneConfig}"}],style:t.buttonStyle,attrs:{type:"primary"}},[t._v(" 推送配置 ")])],1)],1)],1)],1),n("a-row",[n("a-space",[n("a-col",[n("a-popconfirm",{attrs:{"cancel-text":"取消","ok-text":"确认"},on:{confirm:t.downloadFile},scopedSlots:t._u([{key:"title",fn:function(){return[n("p",{staticStyle:{color:"red"}},[t._v("保存此页面显示的配置到本地？")])]},proxy:!0}])},[n("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),n("a-button",{style:t.buttonStyle,attrs:{type:"primary"}},[t._v("保存本地")])],1)],1),n("a-col",[n("a-button",{style:t.buttonStyle,attrs:{disabled:!(t.fileList&&t.fileList.length>0)||void 0,type:"primary"},on:{click:t.readFile}},[t._v(" 预览文件 ")])],1)],1)],1),n("a-row",[n("a-space",[n("a-col",[n("a-upload",{style:t.buttonStyle,attrs:{"before-upload":t.beforeUpload,"file-list":t.fileList,remove:t.handleRemove,accept:".json"}},[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),t._v(" 选择文件 ")],1)],1)],1)],1)],1)],1),n("a-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0"}},[t._v(" 分割线 ")]),n("json-pre",{attrs:{json:t.json}})],1)},a=[];function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){if(Array.isArray(t))return r(t)}n(82526),n(41817),n(41539),n(32165),n(78783),n(33948),n(91038);function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n(47042),n(68309),n(74916),n(77601);function l(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}n(21703);function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||s(t)||l(t)||c()}n(40561),n(92222);var d=n(79767),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.json,expression:"json"}],staticClass:"content"},[n("pre",{domProps:{innerHTML:t._s(t.formattedJSON)}})])},p=[];n(38862),n(15306);function h(t){return"string"!=typeof t&&(t=JSON.stringify(t,void 0,2)),t=t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"}))}var m={mounted:function(){this.formattedJSON=h(this.json)},props:["json"],data:function(){return{formattedJSON:""}},watch:{json:function(t,e){this.formattedJSON=h(t)}}},v=m,y=n(1001),b=(0,y.Z)(v,f,p,!1,null,"31a4878b",null),g=b.exports;n(60285),n(41637),n(23123);function w(t,e){t="string"===typeof t?t:JSON.stringify(t);var n=new Blob([t]);if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(n,e);else{var o=document.createElement("a");o.download=e,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}}var S=n(28935),j={components:{JsonPre:g},data:function(){return{fileList:[],json:"",version_code:300042,buttonStyle:{width:"110px"}}},created:function(){this.pull()},methods:{handleRemove:function(t){var e=this.fileList.indexOf(t),n=this.fileList.slice();n.splice(e,1),this.fileList=n},beforeUpload:function(t){return this.fileList=[t].concat(u(this.fileList)),!1},readFile:function(){var t=this;if(!this.fileList||this.fileList.length<1)this.$message.error("请选择文件");else{var e=new FileReader;e.onload=function(){return t.json=e.result},e.readAsText(this.fileList[0])}},downloadFile:function(){console.log(this.json),w(this.json,"config.json")},pull:function(){var t=this,e=(new Date).getTime();this.$axios({method:"post",url:d.KB()+"/clone/pull",data:{data:{version_code:this.version_code},timestamp:e,sign:d.Xx(e,d.zY())}}).then((function(e){t.json=e.data.data})).catch((function(e){t.json=""}))},push:function(){var t=(new Date).getTime();this.$axios({method:"post",url:d.KB()+"/clone/push",data:{data:this.json,timestamp:t,sign:d.Xx(t,d.zY())}}).then((function(t){S.Z.prototype.$message.success("推送成功!")}))},enableCloneConfig:function(){return d.d2()}},watch:{}},_=j,x=(0,y.Z)(_,o,a,!1,null,null,null),C=x.exports}}]);
//# sourceMappingURL=413-legacy.5b06e27a.js.map