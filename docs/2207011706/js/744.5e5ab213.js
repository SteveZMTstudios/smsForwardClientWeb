"use strict";(self["webpackChunksmsFW"]=self["webpackChunksmsFW"]||[]).push([[744],{46744:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadingMore.apply(null,arguments)}}},[o("a-space",{attrs:{direction:"vertical"}},[o("a-row",[o("a-space",[o("div",[t._v(" 短信类型: ")]),o("a-col",{attrs:{span:4}},[o("a-select",{ref:"select",staticStyle:{width:"70px"},model:{value:t.query.type,callback:function(e){t.$set(t.query,"type",e)},expression:"query.type"}},t._l(t.options,(function(e){return o("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),o("a-col",[t._v(" 关键字: ")]),o("a-col",[o("a-input",{staticStyle:{width:"100px"},attrs:{label:"关键字",placeholder:"请输入关键字"},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1)],1)],1),o("a-row",[o("a-col",[o("a-button",{attrs:{type:"primary"},on:{click:t.loadingMore}},[t._v("刷新")])],1)],1)],1),o("a-divider",{staticStyle:{color:"#1989fa","border-color":"#1989fa",padding:"0"}},[t._v("双击回复")]),o("a-list",{attrs:{dataSource:t.data,loading:t.loading,rowKey:function(t){return t.date+t.number},"item-layout":"horizontal"},scopedSlots:t._u([{key:"renderItem",fn:function(e,i){return o("a-list-item",{},[o("div",{attrs:{title:e.name},on:{dblclick:function(a){return t.sendSmsLocal(e.number,e.content)}}},[o("a-list-item-meta",[o("div",{staticStyle:{color:"#38a624"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(("未知号码"===e.name?"":e.name+" ")+e.number)+" ")]),o("a-avatar",{attrs:{slot:"avatar",src:a(44552)},slot:"avatar"})],1),o("div",{staticStyle:{"text-align":"left",margin:"0"}},[t._v(t._s("("+(i+1)+")  "+e.content)+" ")]),o("div",{staticStyle:{"text-align":"left",color:"#2f54eb"},attrs:{slot:"footer"},slot:"footer"},[o("div",{staticStyle:{"font-size":"10px"}},[0===e.sim_id?o("a-tag",{attrs:{color:"#38a624",title:"卡槽一"}},[t._v(" SIM1 ")]):1===e.sim_id?o("a-tag",{attrs:{color:"#601bd7",title:"卡槽二"}},[t._v(" SIM2 ")]):o("a-tag",[t._v(" "+t._s("未知:"+e.sim_id)+" ")]),t._v(" "+t._s(t.format(e.date,"yyyy-MM-dd HH:mm:ss"))+" ")],1)])],1)])}}])},[t.showLoadingMore?o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"loadMore"},slot:"loadMore"},[t.loadingMore?o("a-spin"):o("div",{staticStyle:{width:"100%",height:"40px",padding:"0 0","background-color":"#bfbfbf"},on:{click:t.onLoadMore}},[o("div",{staticStyle:{"font-size":"30px",color:"#2f54eb"}},[t._v(" 更多> ")])])],1):t._e()])],1)},i=[],n=a(19387),l=a(79767),s={components:{},data(){return{query:{type:"1",keyword:""},options:[{value:"1",label:"接收"},{value:"2",label:"发送"}],solts:[{text:"卡槽一",value:"0"},{text:"卡槽二",value:"1"},{text:"-",value:"-1"}],loading:!1,loadingMore:!1,showLoadingMore:!0,pagination:{size:"small",total:0,current:1,defaultPageSize:10,showTotal:t=>`共 ${t} 条`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],onChange:(t,e)=>this.onPageChange(t),onShowSizeChange:(t,e)=>this.onPageShowSizeChange(e)},data:[]}},created(){this.onLoadMore()},mounted(){},methods:{onLoadMore(){this.loadingMore=!0,this.loading=!0;let t=(new Date).getTime();this.$axios({method:"post",url:l.KB()+"/sms/query",data:{data:{type:this.query.type,page_num:this.pagination.current++,page_size:this.pagination.defaultPageSize,keyword:this.query.keyword},timestamp:t,sign:l.Xx(t,l.zY())}}).then((t=>{t.data.data.length<1&&(this.showLoadingMore=!1),this.pagination.current++,this.data=this.data.concat(t.data.data),this.loadingMore=!1,this.$nextTick((()=>{window.dispatchEvent(new Event("resize"))})),this.loading=!1})).catch((t=>{this.loadingMore=!1,this.loading=!1}))},format(t,e){return n.Z.format(new Date(t),e)},onPageChange(t,e){this.pagination.current=t},onPageShowSizeChange(t){this.pagination.defaultPageSize=t},sendSmsLocal(t,e){l.Vd(t,e)}},watch:{}},r=s,d=a(1001),c=(0,d.Z)(r,o,i,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=744.5e5ab213.js.map